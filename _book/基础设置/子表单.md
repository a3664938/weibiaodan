# 子表单
***

子表单，适用于录入数据的格式一定但次数不定的情况。

格式一定，是指设计好子表单的字段；

次数不定，是指在录入数据时可以新建记录，而且新建记录的次数是不限制的。

注意：很多情况下，一些用户为了横向布置表单，使用子表单字段，这其实没有发挥出子表单的功能，反而给后续计算等带来困扰，所以选择的时候一定要功能是否符合的角度考虑。

##1.控件属性

子表单的字段属性，是将子表单作为一个字段整体来生效的。

* （1）添加子字段、删除、排序。

![子表单1][子表单1]

* （2）关联类型

默认为无，也可关联本地数据、第三方数据。

关联本地数据：通过关联本地表单数据，选择关联字段并设置关联条件，相对应的字段会显示在子表单内。

![子表单关联本地数据][子表单关联本地数据]

关联第三方数据源。可参考： [第三方数据源][第三方数据源]

* （3）默认值

整个子表单的默认值。

* （4）操作及显示权限

整个子表单是否可见、是否可编辑。

##2.子字段设置

点击子字段，进行设置。设置完之后，一定要记得保存。

![子表单3][子表单3]

##3.多表头表格

<font color="blue">只支持设置两级多表头。</font>

在已创建的子表单内放入容器控件，再在容器下选取自己需要的控件，选好后，将所需要控件放入子表单的容器内，即可。

![子表单11][子表单11]


##4. 应用举例

有一张报名表，明细里包含「项目」「课时金额」「课时数量」「小计」「折扣」「折后价格」字段。其中，「项目」和「课时金额」字段，调用项目信息表的数据。

* （1）做项目信息表，「项目」为单行文本，「课时金额」为数字，并录入数据。

![子表单4][子表单4]

* （2）报名表中，用子表单记录明细。添加字段，「项目」为下拉框，「课时金额」「课时数量」「小计」「折后价格」为数字。

![子表单5][子表单5]

* （3）「项目」，设置关联其它表单数据，调用信息表中的项目数据。

![子表单6][子表单6]

* （4）「课时金额」，设置数据联动，以项目为条件，调用信息表中的对应数据。当子表单中的项目选定之后，课时金额中会联动出对应的数据。

![子表单7][子表单7]

* （5）「课时数量」，录入时自填，没有其他设置。如果你的数据有小数，一定要记得勾选允许小数。

* （6）「小计」，设置编辑公式。既然是函数运算得到的数据，取消勾选可编辑，即不可改动计算出来的值。如果你的数据有小数，一定要记得勾选允许小数。

![子表单8][子表单8]

##5. 子表单常见函数

* （1）子表单里的一列的和。函数为，SUM(子表单.字段)。

注意如果要对子表单的字段进行求和，这个字段「总计」必须位于主表中，不能添加到另一个子表单中。

![子表单12][子表单12]









[子表单1]:..\assets\设计页面\子表单1.gif
[子表单2]:..\assets\设计页面\子表单2.gif
[子表单3]:..\assets\设计页面\子表单3.gif
[子表单4]:..\assets\设计页面\子表单4.jpg
[子表单5]:..\assets\设计页面\子表单5.jpg
[子表单6]:..\assets\设计页面\子表单6.gif
[子表单7]:..\assets\设计页面\子表单7.gif
[子表单8]:..\assets\设计页面\子表单8.gif
[子表单11]:..\assets\设计页面\子表单11.gif
[子表单12]:..\assets\设计页面\子表单12.gif
[第三方数据源]:./第三方数据源/第三方数据源.html
[子表单关联本地数据]:..\assets\设计页面\子表单关联本地数据.jpg