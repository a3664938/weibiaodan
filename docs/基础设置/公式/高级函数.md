# 高级函数
***
用于获取表数据等的高级函数方法。

##1. MAPX


MAPX(operation, map_value, map_field, result_field)    

MAPX 函数是一个可以用来进行跨表单取数的高级函数。   

当指定表单的map_field列的值为map_value时，返回result_field的所有值，然后根据指定的聚合操作operation得到对应的返回值。    

* operation: 必需。聚合操作。   

* map_value: 必需。条件字段值。即检索值   

* map_field: 必需。条件字段名。即检索范围   

* result_field:必需。字段返回值。   

其中operation参数为字符串，可选值如下：   

参数值|含义
:-:|:-:
first|获取返回值的第一个
last|获取返回值的最后一个
max|最大值
min|最小值
avg|平均值
sum|求和
count|获取返回值的个数

###（1）跨表单含义

MAPX函数是一个“跨表单”函数。即其他所有函数都是在当前表单运算的函数，无法调用当前表单或者其他表单中已经提交的数据。MAPX函数可以在一定程度上弥补这样的不足。   

跨表有两种情况：   

* （1）同1张表单，录入时调用之前已经提交的数据。     

* （2）两张表单。A表录入数据时，调用B表单已经录入的数据。     

###（2）函数格式

>MAPX("聚合操作",检索值,检索范围,返回值)
     

    
整个计算过程为：在检索范围中，找到检索值对应的返回值，并对返回值进行聚合操作。   

注意检索值来自当前表单中（蓝底），检索范围和返回值来自所有表单字段中的同一表单（绿底）。    

